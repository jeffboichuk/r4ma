<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R for Marketing Analytics</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="R for Marketing Analytics" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://jeffboichuk.github.io/r4ma" />
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="jeffboichuk/r4ma" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R for Marketing Analytics" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Jeffrey Boichuk">
<meta name="author" content="Steven Mortimer">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="tools.html">
<link rel="next" href="datatransformation.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Marketing Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="marketing.html"><a href="marketing.html"><i class="fa fa-check"></i><b>1</b> What is Marketing?</a></li>
<li class="chapter" data-level="2" data-path="tools.html"><a href="tools.html"><i class="fa fa-check"></i><b>2</b> Tools at your Disposal</a><ul>
<li class="chapter" data-level="2.1" data-path="tools.html"><a href="tools.html#data"><i class="fa fa-check"></i><b>2.1</b> Data</a></li>
<li class="chapter" data-level="2.2" data-path="tools.html"><a href="tools.html#software"><i class="fa fa-check"></i><b>2.2</b> Software</a></li>
<li class="chapter" data-level="2.3" data-path="tools.html"><a href="tools.html#getting-started-with-r"><i class="fa fa-check"></i><b>2.3</b> Getting Started with R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>3</b> Data Visualizations</a><ul>
<li class="chapter" data-level="3.1" data-path="dataviz.html"><a href="dataviz.html#creating-a-canvas"><i class="fa fa-check"></i><b>3.1</b> Creating a Canvas</a></li>
<li class="chapter" data-level="3.2" data-path="dataviz.html"><a href="dataviz.html#adding-layers-of-geoms"><i class="fa fa-check"></i><b>3.2</b> Adding Layers of Geoms</a></li>
<li class="chapter" data-level="3.3" data-path="dataviz.html"><a href="dataviz.html#adding-labels-axes-and-legends"><i class="fa fa-check"></i><b>3.3</b> Adding Labels, Axes, and Legends</a></li>
<li class="chapter" data-level="3.4" data-path="dataviz.html"><a href="dataviz.html#faceting-data-by-group"><i class="fa fa-check"></i><b>3.4</b> Faceting Data by Group</a></li>
<li class="chapter" data-level="3.5" data-path="dataviz.html"><a href="dataviz.html#chart-types"><i class="fa fa-check"></i><b>3.5</b> Chart Types</a></li>
<li class="chapter" data-level="3.6" data-path="dataviz.html"><a href="dataviz.html#advanced-plotting"><i class="fa fa-check"></i><b>3.6</b> Advanced Plotting</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="datatransformation.html"><a href="datatransformation.html"><i class="fa fa-check"></i><b>4</b> Preparing and Transforming Data</a><ul>
<li class="chapter" data-level="4.1" data-path="datatransformation.html"><a href="datatransformation.html#data-pipelines"><i class="fa fa-check"></i><b>4.1</b> Data Pipelines</a></li>
<li class="chapter" data-level="4.2" data-path="datatransformation.html"><a href="datatransformation.html#selecting"><i class="fa fa-check"></i><b>4.2</b> Selecting</a></li>
<li class="chapter" data-level="4.3" data-path="datatransformation.html"><a href="datatransformation.html#mutating"><i class="fa fa-check"></i><b>4.3</b> Mutating</a></li>
<li class="chapter" data-level="4.4" data-path="datatransformation.html"><a href="datatransformation.html#mutating-within-groups"><i class="fa fa-check"></i><b>4.4</b> Mutating within Groups</a></li>
<li class="chapter" data-level="4.5" data-path="datatransformation.html"><a href="datatransformation.html#summarizing"><i class="fa fa-check"></i><b>4.5</b> Summarizing</a></li>
<li class="chapter" data-level="4.6" data-path="datatransformation.html"><a href="datatransformation.html#spread-and-gather"><i class="fa fa-check"></i><b>4.6</b> Spread and Gather</a></li>
<li class="chapter" data-level="4.7" data-path="datatransformation.html"><a href="datatransformation.html#functions"><i class="fa fa-check"></i><b>4.7</b> Functions</a></li>
<li class="chapter" data-level="4.8" data-path="datatransformation.html"><a href="datatransformation.html#putting-it-all-together"><i class="fa fa-check"></i><b>4.8</b> Putting it all together</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="datastructures.html"><a href="datastructures.html"><i class="fa fa-check"></i><b>5</b> Data Structures</a><ul>
<li class="chapter" data-level="5.1" data-path="datastructures.html"><a href="datastructures.html#tidy-principles"><i class="fa fa-check"></i><b>5.1</b> Tidy Principles</a></li>
<li class="chapter" data-level="5.2" data-path="datastructures.html"><a href="datastructures.html#relational-data"><i class="fa fa-check"></i><b>5.2</b> Relational Data</a></li>
<li class="chapter" data-level="5.3" data-path="datastructures.html"><a href="datastructures.html#joins"><i class="fa fa-check"></i><b>5.3</b> Joins</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="measures.html"><a href="measures.html"><i class="fa fa-check"></i><b>6</b> Measures in Marketing</a><ul>
<li class="chapter" data-level="6.1" data-path="measures.html"><a href="measures.html#net-promoter-score"><i class="fa fa-check"></i><b>6.1</b> Net Promoter Score</a></li>
<li class="chapter" data-level="6.2" data-path="measures.html"><a href="measures.html#customer-lifetime-value"><i class="fa fa-check"></i><b>6.2</b> Customer Lifetime Value</a></li>
<li class="chapter" data-level="6.3" data-path="measures.html"><a href="measures.html#customer-satisfactioncustomer-delight"><i class="fa fa-check"></i><b>6.3</b> Customer Satisfaction/Customer Delight</a></li>
<li class="chapter" data-level="6.4" data-path="measures.html"><a href="measures.html#others-consult-ama-dictionary-for-more"><i class="fa fa-check"></i><b>6.4</b> Others? Consult AMA dictionary for more?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="fieldexp.html"><a href="fieldexp.html"><i class="fa fa-check"></i><b>7</b> Conducting Marketing Field Experiment</a></li>
<li class="chapter" data-level="8" data-path="mix.html"><a href="mix.html"><i class="fa fa-check"></i><b>8</b> Understanding Marketing Mix</a></li>
<li class="chapter" data-level="9" data-path="trade.html"><a href="trade.html"><i class="fa fa-check"></i><b>9</b> Pricing and Merchandising</a></li>
<li class="chapter" data-level="10" data-path="machinelearning.html"><a href="machinelearning.html"><i class="fa fa-check"></i><b>10</b> Machine Learning in Marketing</a></li>
<li class="chapter" data-level="11" data-path="action.html"><a href="action.html"><i class="fa fa-check"></i><b>11</b> Moving from Data to Action</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Marketing Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dataviz" class="section level1">
<h1><span class="header-section-number">3</span> Data Visualizations</h1>
<p>Good marketing tells a story, it evokes an emotion, and elicits a response. The same can be said about good data visualizations. In this chapter we will show you how to use the R package <strong>ggplot2</strong> to visualize different types of marketing data to tell your story.</p>
<div id="creating-a-canvas" class="section level2">
<h2><span class="header-section-number">3.1</span> Creating a Canvas</h2>
<div style="clear:left;overflow: auto;">
<p><img style="float:right;padding-left:20px;padding-bottom:20px;" src="images/ch3-hadley-plot.jpg" /> The <strong>ggplot2</strong> package is an interesting solution because it does not provide a set of chart types that you can pick and choose. Microsoft Excel has always provided a fixed set of scattercharts, bar charts, and other popular visualizations. In contrast, ggplot2 an extensible system of commands that build literally any picture you’d like to create. Talented R users have created ggplot masterpieces, such as, Garrett Grolemund and David Kahle’s plot of Hadley Wickham.</p>
<p>Every ggplot visualization starts with a canvas. You can create a blank canvas using the function <code>ggplot()</code>. This function takes two arguments: 1) <code>data</code> and 2) <code>mapping</code>. You can think of the <code>data</code> argument as a pallete of information from which to construct the plot and and the <code>mapping</code> as the plan for how to structure that information (e.g. as the x-axis, y-axis, size, shape or color). Supplying these argument still stop short of actually creating a plot</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="co">#library(completejourney)</span>
<span class="kw">ggplot</span>(<span class="dt">data=</span>iris, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Petal.Length))</code></pre></div>
<p><img src="03-dataviz_files/figure-html/creating-a-canvas-1.svg" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="adding-layers-of-geoms" class="section level2">
<h2><span class="header-section-number">3.2</span> Adding Layers of Geoms</h2>
<p>Now that you’ve created a blank canvas, you need to add layers to it. In the canvas example above we used the <code>aes()</code> function, which is short for aesthetics. When you define the aesthetics in the top level <code>ggplot()</code> function call, it applies those aesthetics to every layer that subsequently gets applied to the plot. Layering is the core idea of constructing a plot. Every new layer gets added to the canvas via the plus sign (<code>+</code>). As an example, let’s add a set of points to the canvas. You can do this using the <code>geom_point()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>iris, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Petal.Length)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="03-dataviz_files/figure-html/adding-layers-1.svg" width="70%" style="display: block; margin: auto;" /></p>
<p>In the code above the <code>ggplot()</code> function creates a canvas with the direction to register the <code>iris</code> dataset for potential plotting values and to orient the axes so that the x-axis represents the <code>Sepal.Length</code> variable and the y-axis represents the <code>Petal.Length</code>. This is quite a bit of direction, but the <code>ggplot()</code> function is just creating this canvas. Given all that upfront direction you can add the <code>geom_point()</code> function with no arguments. The function can already infer that you would like points from the <code>iris</code> dataset based on the <code>Sepal.Length</code> and the <code>Petal.Length</code>. The alternative is to specify that aesthetic mapping within the <code>geom_point()</code> function like so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>iris) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Petal.Length))</code></pre></div>
<p><img src="03-dataviz_files/figure-html/adding-layers-2-1.svg" width="70%" style="display: block; margin: auto;" /></p>
<p>This block of code creates the same exact plot as the first, but in this example is much more obvious that you would like to arrange the points with the x and y-axes as specified. Before talking more about the syntax of the <strong>ggplot2</strong> package, it is important to clarify that a “geom” is shorthand for adding a layer to your plot of a specific geometric shape. Geoms are the heart of the plot because they define whether the plot is a line plot, scatterplot, or bar plot. In each of these examples, the geom would be <code>geom_line()</code>, <code>geom_point()</code> or <code>geom_bar()</code> and there are many more geom types to consider. The <strong>ggplot2</strong> package tries to makes things intuitive and easy to remember. However, if you need a list of all the geoms you can find them using tab completion in RStudio. Just type <code>geom_</code> in your RStudio “Console” window, then press <code>TAB</code>. This will trigger the tab-completion feature in RStudio and show you the list of geoms that are available for you to use.</p>
<div class="figure">
<img src="images/ch3-geom-tab-completion.png" />

</div>
<p>Typically, a plot only contains one type of geom. For example, a plot using <code>geom_bar()</code> creates a bar plot, but the layering principle makes it simple to a compound plot with more than one geom so that you can have, for example, bars and a line in the same plot.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># CREATE A COMPOUND PLOT WITH A BAR AND A LINE ACROSS</span></code></pre></div>
</div>
<div id="adding-labels-axes-and-legends" class="section level2">
<h2><span class="header-section-number">3.3</span> Adding Labels, Axes, and Legends</h2>
<p>With plots it is important to pay attention to the details. These details make an effective plot and just like Microsoft Excel allows you to add and customize each element, so does ggplot. The trick is knowing which functions to use so in this section we will introduce lists of the most common and then present all of them together to demonstrate how to create a single polished plot.</p>
<p>First, when creating axes you will reference them using one of the functions starting with “<code>scale_</code>”. You must know the datatype being represented on the axis in order to pick the right function. For example, if you are plotting integers or numeric values on the x-axis then use the function <code>scale_x_continuous()</code>. If you are plotting characters or factors, then use <code>scale_x_discrete()</code> and if you are plotting a date or datetime, then use <code>scale_x_date()</code>. Specifying these functions will allow you to pass in explicit breaks, axis labels formatting, and more. In the example below we have forced the scale from 0 to 8 to with break at every 2 units and showing one decimal place.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># COME UP WITH A BETTER EXAMPLE THAN WHAT IS DESCRIBED ABOVE!</span></code></pre></div>
<p>We highly recommend using the <strong>scales</strong> package when plotting. It comes with a variety of functions to make the scale of axes easier to read. For example, if you would like to display the axes with percent signs and have there be 5 break points, then you can specify like so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># scales::percent, breaks=pretty_breaks(5)</span></code></pre></div>
<p>After configuring the axes, you should label them along with titling the plot. The <code>labs()</code> function accepts the arguments <code>title</code>, <code>subtitle</code>, <code>caption</code>, <code>x</code>, <code>y</code>, <code>fill</code>, <code>color</code>, and more. The purpose of the <code>labs()</code> function is to be a generic function that allows you to provide labels for most all parts of the plot from the aesthetics, to axes, or the overall plot itself.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#labs() code here</span></code></pre></div>
</div>
<div id="faceting-data-by-group" class="section level2">
<h2><span class="header-section-number">3.4</span> Faceting Data by Group</h2>
<p>A common research question is comparing a data across groups. The best way to visualize these relationships is to use the <code>facet_wrap()</code> function. A facet creates a panel of plots with one for each value in the grouping variable. In the example below we have created a <code>Petal.Length</code> histogram for each <code>Species</code> in the iris dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#REPLACE WITH A MARKETING DATA EXAMPLE</span>
<span class="kw">ggplot</span>(<span class="dt">data=</span>iris) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Petal.Length)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">facet_wrap</span>(.<span class="op">~</span>Species, <span class="dt">ncol=</span><span class="dv">1</span>, <span class="dt">scales=</span><span class="st">&quot;fixed&quot;</span>)
<span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></code></pre></div>
<p><img src="03-dataviz_files/figure-html/facet-wrap-1.svg" width="70%" style="display: block; margin: auto;" /></p>
<p>This shows, very distinctly, how the distribution of <code>Petal.Length</code> differs for each of the species. One important aspect to remember when creating facet charts is the scale of the axes in each panel. You can accidentally, and purposefully, mislead readers by having the same metric plotted on two different axis scales. The default argument is <code>scales=&quot;fixed&quot;</code> meaning that the x and y-axes are the same for every panel. You can change that so each panel has a different scale for either axis or both.</p>
<p>Note that the syntax for facetting plots has changed over time, from formula notation to a newer style. There is even a new function called <code>facet_grid()</code> which has the same behavior. You may see examples online that use this older notation like so <code>facet_wrap(.~var)</code>, but this is equivalent to <code>facet_grid(cols=vars(var))</code>.</p>
</div>
<div id="chart-types" class="section level2">
<h2><span class="header-section-number">3.5</span> Chart Types</h2>
<hr />
<p>WHAT SORT OF CHARTS SHOULD BE HIGHLIGHTED HERE????<br />
Marketing Specific Charts?<br />
Pie chart? a critique on pie charts</p>
<hr />
</div>
<div id="advanced-plotting" class="section level2">
<h2><span class="header-section-number">3.6</span> Advanced Plotting</h2>
<p>The <strong>ggplot2</strong> package provides access to the general look and feel of the plot via a “theme”. You may notice in that most plots have a grey background with minor and major axis lines. This is because the default theme is <code>theme_gray()</code>. You can have complete control over every aspect of the plot’s look by using the <code>theme()</code> function; however, there are a number of pre-configured themes to choose from. A good example is the <code>theme_bw()</code> function. Adding this at the end of any plot will make the background white.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gridExtra)
plot1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>iris, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Petal.Length)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()
plot2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>iris, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Petal.Length)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()
<span class="kw">grid.arrange</span>(plot1, plot2, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre></div>
<p><img src="03-dataviz_files/figure-html/theme-blank-1.svg" width="70%" style="display: block; margin: auto;" /></p>
<p>A complete list of default <strong>ggplot2</strong> themes is available in the documentation at <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="uri">https://ggplot2.tidyverse.org/reference/ggtheme.html</a>. These are just the options that come with the <strong>ggplot2* package, but there are over 20 themes available via the </strong>ggthemes** package. This includes styling that match some of the most prolific writers of data journalism including, The Economist, Five Thirty Eight, The Wall Street Journal and more. Despite the overwhelming number of options, we recommend using <code>theme_bw()</code> for the best formatting using only the <strong>ggplot2</strong> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggthemes)
plot1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>iris, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Petal.Length)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()
plot2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data=</span>iris, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Petal.Length)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_wsj</span>()
<span class="kw">grid.arrange</span>(plot1, plot2, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre></div>
<p><img src="03-dataviz_files/figure-html/theme-wsj-1.svg" width="70%" style="display: block; margin: auto;" /></p>
<p>Even with the right plot type, readers might need an extra callout or highlight to the core insight. In keeping with the idea of layers, you can annotate a plot with a line, text, or other shape just by adding it as another layer. For example, there are geoms available for you to add a horizontal line (<code>geom_hline()</code>) or vertical line (<code>geom_vline()</code>). The <code>annotate()</code> function makes it easy to add text or shapes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data=</span>iris, <span class="dt">mapping=</span><span class="kw">aes</span>(<span class="dt">x=</span>Sepal.Length, <span class="dt">y=</span>Petal.Length)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept=</span><span class="kw">mean</span>(iris<span class="op">$</span>Petal.Length), <span class="dt">color=</span><span class="st">&quot;red&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept=</span><span class="kw">mean</span>(iris<span class="op">$</span>Sepal.Length), <span class="dt">color=</span><span class="st">&quot;red&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">annotate</span>(<span class="dt">geom=</span><span class="st">&quot;text&quot;</span>, <span class="dt">label=</span><span class="st">&quot;Avg Petal.Length&quot;</span>, 
           <span class="dt">x=</span><span class="kw">min</span>(iris<span class="op">$</span>Sepal.Length) <span class="op">+</span><span class="st"> </span><span class="fl">0.25</span>, 
           <span class="dt">y=</span><span class="kw">mean</span>(iris<span class="op">$</span>Petal.Length) <span class="op">+</span><span class="st"> </span><span class="fl">0.25</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">annotate</span>(<span class="dt">geom=</span><span class="st">&quot;text&quot;</span>, <span class="dt">label=</span><span class="st">&quot;Avg Sepal.Length&quot;</span>, 
           <span class="dt">x=</span><span class="kw">mean</span>(iris<span class="op">$</span>Sepal.Length) <span class="op">+</span><span class="st"> </span><span class="fl">0.4</span>, 
           <span class="dt">y=</span><span class="kw">max</span>(iris<span class="op">$</span>Petal.Length) <span class="op">-</span><span class="st"> </span><span class="fl">0.1</span>)</code></pre></div>
<p><img src="03-dataviz_files/figure-html/annotate-1.svg" width="70%" style="display: block; margin: auto;" /></p>
<p>We would be remiss not to mention the amazing collection of open source “extensions” that make it easier to produce beautiful plots. There are dozens of packages registered as extenders of the <strong>ggplot2</strong> package. These packages make it easy for users to create complex plots. For example, the <strong>gganimate</strong> package makes it possible to animate plots typically to exhibit trends as they evolve over time. The package <strong>ggrepel</strong> uses a dynamic algorithm to label all points in a scatterplot without having overlapping labels. It is truly amazing work that is being done by researchers and analysts who contribute their work back to the R user community. {This type of collaboration is why using an open-source software can be a good decision.} say this??</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># EXAMPLE OF A USEFUL EXTENSION, POSSIBLY MARKETING RELATED?</span></code></pre></div>
<hr />
<p>SHOULD WE TALK ABOUT DATA FORMAT (I.E. LONG VS WIDE)??? - gather?</p>
<hr />

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tools.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="datatransformation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jeffboichuk/r4ma/edit/master/03-dataviz.Rmd",
"text": "Edit"
},
"download": ["r4ma.pdf", "r4ma.epub", "r4ma.mobi"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
