<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R for Marketing Analytics</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="R for Marketing Analytics" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://jeffboichuk.github.io/r4ma" />
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="jeffboichuk/r4ma" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R for Marketing Analytics" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Jeffrey Boichuk">
<meta name="author" content="Steven Mortimer">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="grouped-mutates.html">
<link rel="next" href="spread-and-gather.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Marketing Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="marketing.html"><a href="marketing.html"><i class="fa fa-check"></i><b>1</b> What is Marketing?</a></li>
<li class="chapter" data-level="2" data-path="tools.html"><a href="tools.html"><i class="fa fa-check"></i><b>2</b> Tools at your Disposal</a><ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2.1</b> Data</a></li>
<li class="chapter" data-level="2.2" data-path="software.html"><a href="software.html"><i class="fa fa-check"></i><b>2.2</b> Software</a></li>
<li class="chapter" data-level="2.3" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html"><i class="fa fa-check"></i><b>2.3</b> Getting Started with R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>3</b> Data Visualizations</a><ul>
<li class="chapter" data-level="3.1" data-path="creating-a-canvas.html"><a href="creating-a-canvas.html"><i class="fa fa-check"></i><b>3.1</b> Creating a Canvas</a></li>
<li class="chapter" data-level="3.2" data-path="adding-layers-of-geoms.html"><a href="adding-layers-of-geoms.html"><i class="fa fa-check"></i><b>3.2</b> Adding Layers of Geoms</a></li>
<li class="chapter" data-level="3.3" data-path="adding-labels-axes-and-legends.html"><a href="adding-labels-axes-and-legends.html"><i class="fa fa-check"></i><b>3.3</b> Adding Labels, Axes, and Legends</a></li>
<li class="chapter" data-level="3.4" data-path="faceting-data-by-group.html"><a href="faceting-data-by-group.html"><i class="fa fa-check"></i><b>3.4</b> Faceting Data by Group</a></li>
<li class="chapter" data-level="3.5" data-path="chart-types.html"><a href="chart-types.html"><i class="fa fa-check"></i><b>3.5</b> Chart Types</a></li>
<li class="chapter" data-level="3.6" data-path="advanced-plotting.html"><a href="advanced-plotting.html"><i class="fa fa-check"></i><b>3.6</b> Advanced Plotting</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="datatransformation.html"><a href="datatransformation.html"><i class="fa fa-check"></i><b>4</b> Preparing and Transforming Data</a><ul>
<li class="chapter" data-level="4.1" data-path="data-pipelines.html"><a href="data-pipelines.html"><i class="fa fa-check"></i><b>4.1</b> Data Pipelines</a></li>
<li class="chapter" data-level="4.2" data-path="selecting.html"><a href="selecting.html"><i class="fa fa-check"></i><b>4.2</b> Selecting</a></li>
<li class="chapter" data-level="4.3" data-path="mutating.html"><a href="mutating.html"><i class="fa fa-check"></i><b>4.3</b> Mutating</a></li>
<li class="chapter" data-level="4.4" data-path="grouped-mutates.html"><a href="grouped-mutates.html"><i class="fa fa-check"></i><b>4.4</b> Grouped Mutates</a></li>
<li class="chapter" data-level="4.5" data-path="summarizing.html"><a href="summarizing.html"><i class="fa fa-check"></i><b>4.5</b> Summarizing</a></li>
<li class="chapter" data-level="4.6" data-path="spread-and-gather.html"><a href="spread-and-gather.html"><i class="fa fa-check"></i><b>4.6</b> Spread and Gather</a></li>
<li class="chapter" data-level="4.7" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4.7</b> Functions</a></li>
<li class="chapter" data-level="4.8" data-path="putting-it-all-together.html"><a href="putting-it-all-together.html"><i class="fa fa-check"></i><b>4.8</b> Putting it all together</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="relational.html"><a href="relational.html"><i class="fa fa-check"></i><b>5</b> Relational Data</a><ul>
<li class="chapter" data-level="5.1" data-path="tidy-principles.html"><a href="tidy-principles.html"><i class="fa fa-check"></i><b>5.1</b> Tidy Principles</a></li>
<li class="chapter" data-level="5.2" data-path="relational-structures.html"><a href="relational-structures.html"><i class="fa fa-check"></i><b>5.2</b> Relational Structures</a></li>
<li class="chapter" data-level="5.3" data-path="joins.html"><a href="joins.html"><i class="fa fa-check"></i><b>5.3</b> Joins</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="measures.html"><a href="measures.html"><i class="fa fa-check"></i><b>6</b> Measures in Marketing</a><ul>
<li class="chapter" data-level="6.1" data-path="net-promoter-score.html"><a href="net-promoter-score.html"><i class="fa fa-check"></i><b>6.1</b> Net Promoter Score</a></li>
<li class="chapter" data-level="6.2" data-path="customer-lifetime-value.html"><a href="customer-lifetime-value.html"><i class="fa fa-check"></i><b>6.2</b> Customer Lifetime Value</a></li>
<li class="chapter" data-level="6.3" data-path="customer-satisfactioncustomer-delight.html"><a href="customer-satisfactioncustomer-delight.html"><i class="fa fa-check"></i><b>6.3</b> Customer Satisfaction/Customer Delight</a></li>
<li class="chapter" data-level="6.4" data-path="others-consult-ama-dictionary-for-more.html"><a href="others-consult-ama-dictionary-for-more.html"><i class="fa fa-check"></i><b>6.4</b> Others? Consult AMA dictionary for more?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="fieldexp.html"><a href="fieldexp.html"><i class="fa fa-check"></i><b>7</b> Conducting Marketing Field Experiment</a></li>
<li class="chapter" data-level="8" data-path="mix.html"><a href="mix.html"><i class="fa fa-check"></i><b>8</b> Understanding Marketing Mix</a></li>
<li class="chapter" data-level="9" data-path="trade.html"><a href="trade.html"><i class="fa fa-check"></i><b>9</b> Pricing and Merchandising</a></li>
<li class="chapter" data-level="10" data-path="machinelearning.html"><a href="machinelearning.html"><i class="fa fa-check"></i><b>10</b> Machine Learning in Marketing</a></li>
<li class="chapter" data-level="11" data-path="action.html"><a href="action.html"><i class="fa fa-check"></i><b>11</b> Moving from Data to Action</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Marketing Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="summarizing" class="section level2">
<h2><span class="header-section-number">4.5</span> Summarizing</h2>
<p>In the spirit of transforming data we will talk about summarizing it. A summary is just a transformation of underlying source data to a new form. Before summarizing data you must first have an idea about how to summarize it. Ask yourself: Do I want to count rows? Unique instances? Do I want to calculate the average? Standard deviation? Excel users often summarize using a Pivot Table which has the summarizing functions <code>COUNT</code>, <code>COUNTA</code>, <code>AVERAGE</code>, <code>STDEV</code>, <code>MAX</code>, and <code>MIN</code> to name a few. These are very similar to what exists in R and below is a table that translates each of these summary methods to their equivalent counterpart in R.</p>
<p>[INSERT TABLE HERE]</p>
<p>Below is an example in R of how to count the number of observations and compute the average.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_tibble</span>(iris) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">mean</span>(Petal.Length))
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;       n  mean</span>
<span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1   150  3.76</span></code></pre></div>
<p>If you would like to compute this same summary for different groups of the data then you can just add the <code>group_by()</code> function. As mentioned above, the <code>group_by()</code> function simply prepares the dataset so that it is segmented. Adding the <code>summarize()</code> function after the <code>group_by</code> means that the operations will be run separately across each of the data segments to compute one summary for each.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_tibble</span>(iris) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">mean</span>(Petal.Length))
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   Species        n  mean</span>
<span class="co">#&gt;   &lt;fct&gt;      &lt;int&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 setosa        50  1.46</span>
<span class="co">#&gt; 2 versicolor    50  4.26</span>
<span class="co">#&gt; 3 virginica     50  5.55</span></code></pre></div>
<p>In Excel, the alternative to using a Pivot Table to summarize data for a group might be to use the <code>COUNTIF</code>, <code>SUMIF</code>, <code>AVERAGEIF</code> functions. These functions perform the same summary methods as mentioned above, but only on rows that meet some criteria. This is better represented in an R pipeline by using the <code>filter()</code> function to only select the observations that meet your criteria and then summarizing. In the example below we remove X observations and then calculate Y.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_tibble</span>(iris) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(Species <span class="op">==</span><span class="st"> &#39;setosa&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">mean</span>(Petal.Length))
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;       n  mean</span>
<span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1    50  1.46</span></code></pre></div>
<p>In Excel you would implement this as a formula <code>AVERAGEIF(E2:E150, &quot;setosa&quot;, A2:A150)</code>. To reiterate, in R filtering just means that you remove any rows from a dataset that meet a certain criteria. This is helpful in a pipeline because it will remove the observations while performing that pipeline calculation without removing them from the original dataset you placed at the top of the pipeline. The symbols for doing comparisons, also called “logical operators”, are pretty much the same in Excel as they are in R. One key difference is that if you are checking whether two things are equal to each other in R, then you will need to use double equal signs (<code>A2==B2</code>) rather than the single equals sign that Excel uses <code>A2=B2</code>. Below is a table that shows how these operators are different in R compared to Excel</p>
<p>[INSERT TABLE HERE]</p>
<p>In the example below we show multiple of these operators in action to show how they can be used together to select a very small subset of observations from a data set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as_tibble</span>(iris) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(Species <span class="op">==</span><span class="st"> &#39;setosa&#39;</span>,
         <span class="op">!</span>(Petal.Length <span class="op">==</span><span class="st"> </span><span class="fl">1.4</span> <span class="op">|</span><span class="st"> </span>Petal.Length <span class="op">==</span><span class="st"> </span><span class="fl">1.5</span>),
         Petal.Width <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.2</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>())
<span class="co">#&gt; # A tibble: 1 x 1</span>
<span class="co">#&gt;       n</span>
<span class="co">#&gt;   &lt;int&gt;</span>
<span class="co">#&gt; 1     1</span></code></pre></div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="grouped-mutates.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="spread-and-gather.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jeffboichuk/r4ma/edit/master/04-datatransformation.Rmd",
"text": "Edit"
},
"download": ["r4ma.pdf", "r4ma.epub", "r4ma.mobi"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
